$(function(){0<$("#account-name").length?($("#account").on("submit",function(a){a.preventDefault();accountData();return!1}),$("#account-name").on("keyup",function(a){a.preventDefault();0<$("#account-name").val().length?$("#account-send").prop("disabled",!1):$("#account-send").prop("disabled",!0);return!1})):changeContinent(!0)});
function accountData(){$("#account-name").prop("disabled",!0);$("#account-send").prop("disabled",!0);$.ajax({type:"POST",dataType:"json",url:BASE_URL+"/get/account-data.php",data:{account:$("#account-name").val()},success:function(a,b,c){"undefined"!=typeof a.success&&a.success?($("#step_2-before")&&$("#step_2-after")&&$("#step_2-code")&&($("#step_2-before").hide(),$("#step_2-after").show()),$("#step_2-code")&&($("#step_2-code").focus(),$("#step_2-code").off("keyup.jump").on("keyup.jump",function(a){a=
$(this).val();20===a.length&&(top.location.href=BASE_URL+"/data/"+a)})),$("#step_3")&&$("#step_3").hide()):"undefined"!=typeof a.invalid&&a.invalid&&(alert(strings.account_invalid),$("#account-name").prop("disabled",!1),$("#account-send").prop("disabled",!1))}})}
function changePrivacy(a){if("object"!=typeof a||!$("#access_code"))return!1;var b,c=$(a.target),d=c.parents("tr"),e=d.attr("data-field");b=c.is('[type="checkbox"]')?c.is(":checked"):c.val();$.ajax({type:"POST",dataType:"json",url:BASE_URL+"/get/account-data.php",data:{context:"privacy",field:e,value:b,access_code:$("#access_code").val()},success:function(a,f,g){"undefined"!=typeof a.success&&a.success&&(a=d.parents("form").find('tr[data-privacy="'+d.attr("data-privacy")+'"]'),"boolean"==typeof b&&
!0===b||"string"==typeof b&&"1"==b?($.each(a,function(){$(this).removeClass("privacy-public").addClass("privacy-private")}),"dob"!=e&&c.next("span").html(strings.privacy_private)):($.each(a,function(){$(this).removeClass("privacy-private").addClass("privacy-public")}),"dob"!=e&&c.next("span").html(strings.privacy_public)))}})}
function changeContinent(a){if(!$("#data-continent")||!$("#data-country"))return!1;var b=$("#data-continent").val();$("#data-country option").show();$('#data-country option[class!="'+b+'"]').hide();$('#data-country option[value="0"]').show();"boolean"==typeof a&&a||($("#data-country").get(0).selectedIndex=0)}
function save(a){a.preventDefault();if(!$("#terms_accepted_container")||!$("#terms_accepted")||!$("#data"))return!1;if($("#terms_accepted").is(":checked"))$("#terms_accepted_container").removeClass("alert");else return $("#terms_accepted_container").addClass("alert"),!1;var b=$(a.target);b.prop("disabled",!0);$("#spinner")&&$("#spinner").show();$.ajax({type:"POST",dataType:"json",url:BASE_URL+"/get/account-data.php",data:$("form#data").serializeArray(),success:function(a,d,e){"undefined"!=typeof a.success&&
a.success?(b.prop("disabled",!1),$("#spinner")&&$("#spinner").hide()):(b.prop("disabled",!1),$("#spinner")&&$("#spinner").hide(),alert(strings.error))}});return!1};
